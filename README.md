# ğŸš— ë³´ì´ˆ ìš´ì „ ğŸš•

> ìš´ì „ì„ ì˜í•˜ê³  ì‹¶ì€ ì‚¬ëŒë“¤ì„ ìœ„í•œ ì»¤ë®¤ë‹ˆí‹°

> ì´ê³³ì—ì„œ ë”ìš± ê¹”ë”í•˜ê²Œ ë³´ì‹¤ ìˆ˜ ìˆì–´ìš” >>> [ì„œë¹„ìŠ¤ ì†Œê°œ ë¸Œë¡œì…” ë³´ê¸° ğŸ”—](https://dolphin-pc.notion.site/8-13-21-be75fecc932b4a8b88d86d2b1835252c?pvs=4) <<<

## ğŸ“Œ í”„ë¡œì íŠ¸ ì†Œê°œ

- **Service Link : https://www.bocho.p-e.kr**
- **GitHub Link : https://github.com/bocho-drive**
- **Project Notion Link : https://www.notion.so/e4ebb89570f24cdab88acbaf40f86f81?pvs=21**
- ğŸ“† í”„ë¡œì íŠ¸ ê¸°ê°„ : 2024.07.19 ~ 2024.08.15

### ğŸšœ ê°œë°œ íŒ€ì›

<table>
  <tr>
    <td align="center"><a href="https://github.com/Dolphin-PC"><b>ë°•ì°¬ì˜</b></a><br /></td>
    <td align="center"><a href="https://github.com/hyeon9808"><b>í™ì±„í˜„</b></a><br /></td>
    <td align="center"><a href="https://github.com/whtndls"><b>ì¡°ìˆ˜ì¸</b></a><br /></td>
    <td align="center"><a href="https://github.com/young219257"><b>ê¹€ì˜ì•„</b></a><br /></td>
    <td align="center"><a href="https://github.com/hyoyeolking"><b>ì „íš¨ì—´</b></a><br /></td>
  </tr>
  <tr>
      <td align="center"><img src="https://github.com/user-attachments/assets/683f52f8-d8e4-4e9e-ac1f-a5ed7d4b032a" width="130px;" alt=""/><br /><sub></td>
      <td align="center"><img src="https://github.com/user-attachments/assets/a4aa44bc-4d59-46e7-8b74-b18d94a3186e" width="130px;" alt=""/><br /></td>
      <td align="center"><img src="https://github.com/user-attachments/assets/03eb0bf2-0ac1-4c7f-8f2d-06243c5be806" width="130px;" alt=""/><br /></td>
      <td align="center"><img src="https://github.com/user-attachments/assets/4bb46790-6183-44cc-b51b-270d36c71710" width="130px;" alt=""/><br /></td>
      <td align="center"><img src="https://github.com/user-attachments/assets/9ebc81f2-52ba-4b97-b6d3-07c4c21fe1f0" width="130px;" alt=""/><br /></td>
    </tr>
  <tr>
    <td align="center">FrondEnd/Leader</td>
    <td align="center">FrondEnd</td>
    <td align="center">BackEnd/Vice Leader</td>
    <td align="center">BackEnd</td>
    <td align="center">BackEnd</td>
  </tr>
</table>


## ğŸ†Â ê¸°ìˆ ì ì¸ ë„ì „

<details>
  <summary>1. Spring Security OAuth + SNS ì†Œì…œë¡œê·¸ì¸</summary>

- ê°„í¸í•œ ë¡œê·¸ì¸ì„ í†µí•´ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ SNSì„œë¹„ìŠ¤ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.
- SNSë¡œê·¸ì¸ì„ í†µí•´ ATí† í°ê³¼ RTí† í°ì„ ë°œê¸‰ë°›ì•„, ì„œë¹„ìŠ¤ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
![image](https://github.com/user-attachments/assets/4470233e-b4ea-43a3-bfcb-7d8ae62027a2)
â–¶ï¸Â ìì„¸í•œ ì„¤ëª…ì€â€£ https://dolphin-pc.notion.site/7379f6ae257940bc8e14d408a3386446?pvs=4

  
</details>

<details>
  <summary>2. Refresh Tokenì„ ì´ìš©í•œ Silent Refresh</summary>

  
## ğŸ“ŒÂ ë„ì…ë°°ê²½

- JWTí† í°ì€ **stateless**í•˜ê¸°ì—, í† í°ì´ íƒˆì·¨ë˜ì–´ë„ ì„œë²„ëŠ” ì´ë¥¼ ì•Œì§€ ëª»í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ í† í°ì˜ ë§Œë£Œì‹œê°„ì„ ì§§ê²Œ ê°€ì ¸ê°€ëŠ” ê²ƒì´ ë³´ì•ˆì ìœ¼ë¡œ ì•ˆì „í•˜ë‹¤ê³  íŒë‹¨ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, í† í°ì˜ ë§Œë£Œì‹œê°„ì´ ì§§ë‹¤ë©´ ì •ìƒì ì¸ ì‚¬ìš©ìë“¤ì€ **ë¡œê·¸ì¸ì„ ìì£¼ ì‹œë„**í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìƒê¹ë‹ˆë‹¤.

### ê·¸ë˜ì„œ, Refresh Tokenì„ ë„ì…í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

- **Refresh Token**ì€ Access Tokenì„ ì¬ë°œê¸‰í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ ì‚¬ìš©ë˜ë©°, **1ë‹¬ì˜ ë§Œë£Œì‹œê°„**ì„ ê°€ì§‘ë‹ˆë‹¤.
    - í”„ë¡ íŠ¸ì—ì„œ ì¡°ì‘í•  í•„ìš”ê°€ ì—†ê¸°ì— httpìš”ì²­ì‹œ ìë™ìœ¼ë¡œ ì „ì†¡ë˜ëŠ” **Cookie**ì— ë‹´ì•„ ì €ì¥í•©ë‹ˆë‹¤.
    - ë˜í•œ, **Http-Only**ë¥¼ ì ìš©í•˜ì—¬, **XSS**ê³µê²©ì— ì•ˆì „í•˜ê²Œ í•©ë‹ˆë‹¤.
- **Access Token**ì€ **1ì‹œê°„ì˜ ë§Œë£Œì‹œê°„**ì„ ê°€ì§€ë©°, **Local Storage**ì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.
    - ë°±ì—”ë“œ APIì— ë”°ë¼ headerì— í† í°ê°’ì´ ë‹´ê¸°ì§€ ì•Šì•„ì•¼ í•˜ëŠ” ìƒí™©ì´ ìˆê¸°ì—, ì¡°ì‘ì´ ìš©ì´í•œ Local Storageì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.
- ATí† í°ê³¼ RTí† í°ì„ ë§¤ APIìš”ì²­ë§ˆë‹¤ í•¨ê»˜ ì „ì†¡í•˜ë©°, ì„œë²„ì—ì„œ `401` ì—ëŸ¬ ë°œìƒ ì‹œ **í† í°ê°±ì‹ ** or **í† í°ë§Œë£Œ** ì—¬ë¶€ë¥¼ ê²°ì •ì§“ìŠµë‹ˆë‹¤.
    - errorì˜ bodyì— í† í°ì´ ìˆëŠ” ê²½ìš° â†’ ATí† í°ì„ ê°±ì‹ í•˜ê³ , ì› ìš”ì²­ì„ ë‹¤ì‹œ ì „ì†¡í•©ë‹ˆë‹¤.
    - errorì˜ bodyì— í† í°ì´ ì—†ëŠ” ê²½ìš° â†’ 3ë²ˆì˜ ì¬ì‹œë„ ìš”ì²­ ì´ˆê³¼ ì‹œ, ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
    
    ```mermaid
    sequenceDiagram
        participant Client
        participant Server
    
        Client->>Server: RTì™€ ATë¥¼ í¬í•¨í•˜ì—¬ API ìš”ì²­
        Server->>Server: AT ë§Œë£Œì—¬ë¶€ ì²´í¬
        alt AT ìœ íš¨
            Server->>Client: ì› ìš”ì²­ ìˆ˜í–‰
        else AT ë§Œë£Œ
            Server->>Server: RT ë§Œë£Œì—¬ë¶€ ì²´í¬
            alt RT ìœ íš¨
                Server->>Client: ì‘ë‹µ bodyì— AT ì¬ë°œê¸‰ ì²˜ë¦¬
                Client->>Client: API 401 ì—ëŸ¬ Check <br/> (bodyì— AT ìˆìŒ)
                Client->>Client: bodyì— ìˆëŠ” ATë¡œ í† í° ê°±ì‹ 
                Client->>Server: ì› ìš”ì²­ ì „ë‹¬ <br/> axios.requert(error.config)
            else RT ë§Œë£Œ
                Server->>Client: ì‘ë‹µ body::undefined
                Client->>Client: API 401 ì—ëŸ¬ Check <br/> (body ê°’ ì—†ìŒ)
                alt ì¬ë°œê¸‰ ì‹¤íŒ¨ íšŸìˆ˜ 3íšŒ ë¯¸ë§Œ
    	            Client->>Server: ì„œë²„ì— AT ì¬ë°œê¸‰ ìš”ì²­
    		        else ì¬ë°œê¸‰ ì‹¤íŒ¨ íšŸìˆ˜ 3íšŒ ì´ˆê³¼ 
    			        Client->>Client: ì‚¬ìš©ì ì •ë³´ ë§Œë£Œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
    		        end
            end
        end
    
    ```
    
    â–¶ï¸Â ìì„¸í•œ ì„¤ëª…ì€ â€£ https://dolphin-pc.notion.site/7ee13671e7024962b6abde78a903661b?pvs=4
    
</details>

<details>
  <summary>3. ì¹´ì¹´ì˜¤í†¡ ê³µìœ , URLë¡œ ëª¨ë‹¬ì—´ê¸°</summary>

  
- **Kakao SDK ì„¤ì¹˜** ë° **Kakaoê°ì²´ë¥¼ ì´ˆê¸°í™”**í•œ ë‹¤ìŒ, `sendDefault`ë©”ì†Œë“œë¥¼ í†µí•´ í˜„ì¬ URLì„ ê³µìœ í•©ë‹ˆë‹¤.   
- í•˜ì§€ë§Œ, Modalì˜ ê²½ìš° ë‚´ë¶€ Stateë¡œ ê´€ë¦¬ê°€ ë˜ê³  ìˆê¸°ì— URLë§Œìœ¼ë¡œëŠ”, ëª¨ë‹¬ì´ ì—´ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.
  ![image](https://github.com/user-attachments/assets/9e3d0bd1-56fc-44f1-b9e3-a5bdd8b26aec)

    
    ### SearchParamì„ í†µí•´, ëª¨ë‹¬ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
    
    - Modalì„ ê³µìœ í•  ë•ŒëŠ” `modalId` `modalType` ì„ **queryParam**ìœ¼ë¡œ ìƒì„±í•œ URLì„ ê³µìœ í•©ë‹ˆë‹¤.
    ì˜ˆì‹œ) https://www.bocho.p-e.kr/video?modalId=38&modalType=video
    - í•´ë‹¹ URLì˜ **SearchParam**ì„ ì½ì–´, í•´ë‹¹í•˜ëŠ” ëª¨ë‹¬ì„ ì—´ì–´ì£¼ëŠ” ë¡œì§ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.
        
        ```tsx
          const [searchParams, setSearchParams] = useSearchParams();
        
          // * URLì— modalId, modalTypeì´ ìˆì„ ê²½ìš° ëª¨ë‹¬ ì—´ê¸°
          useEffect(() => {
            const modalId = searchParams.get('modalId');
            const modalType = searchParams.get('modalType');
            handleOpen(Number(modalId), modalType as ModalType);
          }, [searchParams, handleOpen]);
        ```
        
        ![image](https://github.com/user-attachments/assets/7e5312d5-7f2e-453d-831c-51b845d3967a)

</details>

<details>
  <summary>4. ImagePlaceholder</summary>

  
- Loading ì‹œê°„ì´ ê¸´ ì´ë¯¸ì§€ë¥¼ ëŒ€ì²´í•˜ëŠ” **PlaceHolder**ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´, ì‚¬ìš©ìì—ê²Œ **ë¡œë”©ì¤‘** ì´ë¼ëŠ” ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
    
    ![image](https://github.com/user-attachments/assets/4b4e33a4-712f-4a40-9a43-7d25b26e7224)

    
- **img** íƒœê·¸ì˜ `onLoad`ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ ë¡œë”©ìƒíƒœë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```
interface Props {
  children: ReactElement<HTMLImageElement>;
}
const ImagePlaceholder = ({ children }: Props) => {
  const { width, height } = children.props;

  const [isLoading, setIsLoading] = useState(true);

  return (
    <Fragment>
      {isLoading && (
        <Placeholder width={width} height={height}>
          <Loading />
        </Placeholder>
      )}

      {/* img íƒœê·¸ì˜ onLoadí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´, createElementë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. */}
      {/* propsë¡œ imgíƒœê·¸ ì„¤ì •ì— í•„ìš”í•œ ìš”ì†Œë¥¼ ë°›ì•„ì™€ imgíƒœê·¸ë¥¼ ì§ì ‘ ë§Œë“œëŠ” ë°©ë²•ì´ ìˆê² ì§€ë§Œ, 
          í™œìš©í•˜ëŠ” ì…ì¥ì—ì„œ ì†ì„±ì´ ì¶”ê°€ë ë•Œë§ˆë‹¤ propsê°€ ì¶”ê°€ë˜ì§€ ì•Šë„ë¡ í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤ */}
      {React.createElement(children.type, {
        ...children.props,
        onLoad: () => setIsLoading(false),
        style: { display: isLoading ? 'none' : 'block' },
      })}
    </Fragment>
  );
};
```

</details>

<details>
  <summary>5. ì¸í”¼ë‹ˆí‹° ìŠ¤í¬ë¡¤</summary>

  
![image](https://github.com/user-attachments/assets/f5a70fae-bdd7-4135-baaf-591a922a5e82)


- í•œ ë²ˆì— ë§ì€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ê²½ìš°, **`ë„¤íŠ¸ì›Œí¬ì§€ì—°`**, **`ë Œë”ë§ì§€ì—°`**ì˜ ë¬¸ì œë¥¼ ì´ˆë˜í•©ë‹ˆë‹¤.
ì´ë¥¼ ë°©ì§€í•˜ê³ ì **Pagination**ì„ ë„ì…í•˜ì˜€ê³ , Scrollë§Œ ë‚´ë ¤ë„ ìë™ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” **Infinite Scroll**ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- Tanstack Queryì˜ **useInfiniteQuery**ë¥¼ í™œìš©í•´ Pagination ì¡°ì‘ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.
    
    ```tsx
    export const useCommunityListSuspenseInfiniteQuery = (category: Category) => {
      return useSuspenseInfiniteQuery({
        queryKey: ['infinite', 'communityList', category],
        initialPageParam: 0,
        queryFn: ({ pageParam = 0 }) => getCommunityList({ category, page: pageParam, size: 10 }),
    
        getNextPageParam: (lastPage) => {
          const { size, number, totalElements } = lastPage.page;
          if (size * (number + 1) >= totalElements) return undefined;
    
          return lastPage.page.number + 1;
        },
      });
    };
    ```
    
- **useScroll** ì»¤ìŠ¤í…€ í›…ì„ í†µí•´ Scrollì´ ë°”ë‹¥ì— ë‹¿ì„ ë•Œ, **fetchNextPage**ë¡œ ë‹¤ìŒ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
    
    ```tsx
    import { InfiniteQueryObserverResult } from '@tanstack/react-query';
    import { useEffect } from 'react';
    import _ from 'lodash';
    
    interface Props {
      length: number;
      fetchNextPage: () => Promise<InfiniteQueryObserverResult>;
      hasNextPage: boolean;
      marginBottom?: number;
    }
    
    const useScroll = ({ length, fetchNextPage, hasNextPage, marginBottom = 0 }: Props):void => {
      /**
       * ìŠ¤í¬ë¡¤ì´ ìƒê¸¸ë•Œê¹Œì§€ ê³„ì† fetch
       *  - lengthë¥¼ ë°›ëŠ” ì´ìœ ëŠ” ë°ì´í„°ë¥¼ ê³„ì†í•´ì„œ fetchí•˜ê¸° ìœ„í•¨
       *  - ê³„ì†í•´ì„œ ë°›ë‹¤ê°€, [clientHeight >= scrollHeight]:ìŠ¤í¬ë¡¤ì´ ìƒê¸°ë©´ ë
       */
      useEffect(() => {
        const { scrollHeight, clientHeight } = document.documentElement;
        if (clientHeight >= scrollHeight && hasNextPage) {
          fetchNextPage();
        }
      }, [length, fetchNextPage, hasNextPage]);
    
      /** ìŠ¤í¬ë¡¤ì´ ë‹¿ê¸° ì „, ë°ì´í„° fetch */
      useEffect(() => {
        const scrollFetch = () => {
          const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
    
          if (clientHeight + scrollTop >= scrollHeight - marginBottom) {
            if (hasNextPage) fetchNextPage();
          }
        };
    
        const handleScroll = _.throttle(scrollFetch, 300);
        window.addEventListener('scroll', handleScroll);
    
        return () => window.removeEventListener('scroll', handleScroll);
      }, [hasNextPage, fetchNextPage, marginBottom]);
    };
    
    export default useScroll;
    
    ```
</details>

    

## ğŸ’¥Â íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
<details>
  <summary>1. ì›¹ì†Œì¼“, Authorizationê²€ì¦</summary>

  
## ğŸ“ŒÂ ë°°ê²½, Spring Security Context
- ì›¹ì†Œì¼“ ì—°ê²° í›„, ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´, `SecurityContextHolder.getContext().getAuthentication()` ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ, nullë¡œ ì²˜ë¦¬ê°€ ë˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ê´€ë ¨ëœ ê¸€ì„ ì°¸ê³ í•´ë³´ë‹ˆ, Springì˜ ë©€í‹° Threadí™˜ê²½ìœ¼ë¡œ ì¸í•´ **SecurityContextHolderì˜ context**ê°€ ê³µìœ ë˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

## ğŸ‰ í•´ê²°, WebSocketSession

- ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ê³ ì, WebSocketSessionê°ì²´ ì•ˆì„ Debugí•´ë³´ë‹ˆ, ìœ ì €ì •ë³´ê°€ ë‹´ê²¨ìˆì—ˆìŠµë‹ˆë‹¤.
    
    ![image](https://github.com/user-attachments/assets/181adbcd-0adc-4e8b-8ea0-10286f7110cf)

    
- ì´ë¥¼ í† ëŒ€ë¡œ, WebSocketSessionê°ì²´ì—ì„œ ìœ ì €ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
    
    ```java
    /** ì›¹ì†Œì¼“ ì„¸ì…˜ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ */
    public CustomUserDetails getUserDetails(WebSocketSession session) {
        Principal principal = session.getPrincipal();
        if (principal instanceof UsernamePasswordAuthenticationToken) {
            UsernamePasswordAuthenticationToken token = (UsernamePasswordAuthenticationToken) principal;
            return (CustomUserDetails) token.getPrincipal();
        }
        return null;
    }
    ```
    
- ì´ë ‡ê²Œ êµ¬í˜„í•œ ë’¤, Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë‹ˆ ì˜ ì ìš©ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
    
    ![image](https://github.com/user-attachments/assets/1c37e7d8-d491-4716-9a25-565c9f0bffe8)

    

## ğŸ’¥Â ë‹¤ì‹œ ë¬¸ì œë°œìƒ, ì›¹ì†Œì¼“ í—¤ë” ì‚¬ìš© ë¶ˆê°€
- ì›¹ì†Œì¼“ í…ŒìŠ¤íŠ¸ ë‹¹ì‹œë§Œ í•´ë„, **Postmanìœ¼ë¡œ Headerì— í† í°ê°’**ì„ ë‹´ì•„ì¤„ ìˆ˜ ìˆì–´ WebSocketSessionê°ì²´ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì›¹ì†Œì¼“ì„ ê°œë°œ/êµ¬í˜„í•˜ë©´ì„œ **í—¤ë”ì— ê°’ì„ ì¶”ê°€í•  ìˆ˜ ì—†ë‹¤ëŠ” ì‚¬ì‹¤**ì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” 2ê°€ì§€ì˜ ì„ íƒì§€ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
    1. **STOMP** : STOMP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•œë‹¤ë©´, ì›¹ì†Œì¼“ Connectionì‹œ í—¤ë”ì— ê°’ì„ ë‹´ì•„ì¤„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
    2. **ApprovalKey** : ë©”ì‹œì§€ ì „ì†¡ë§ˆë‹¤ ë‹´ì•„ì¤„ Keyë¥¼ ë°œê¸‰ë°›ì•„, ì†Œì¼“ ì—°ê²° ë° ë©”ì‹œì§€ ì „ì†¡í•˜ëŠ” ë°©ì‹
    
    ì´ì— ì €í¬ëŠ” STOMPë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šê³ , **ApprovalKey**ë¥¼ ë°œê¸‰ë°›ì•„ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ì‹ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤.
    
    ```mermaid
    sequenceDiagram
        participant Client
        participant Server
    
        Client->>Server: ApprovalKey ë°œê¸‰ ìš”ì²­
        Server-->>Client: ApprovalKey ì‘ë‹µ
        Client->>Server: ì›¹ì†Œì¼“ Connection
        Client->>Server: ë°œê¸‰ë°›ì€ ApprovalKeyë¥¼ í¬í•¨í•˜ì—¬ ì›¹ì†Œì¼“ ë©”ì‹œì§€ ì „ì†¡
        Server->>Server: í‚¤ ê²€ì¦ í›„, ë©”ì‹œì§€ ì €ì¥ ë° broadcast
    
    ```
    
</details>

<details>
  <summary>2. Reactì•± Amplify ë°°í¬, ìƒˆë¡œê³ ì¹¨ ì‹œ ì˜¤ë¥˜</summary>

  
## **ğŸ“Œ ìƒí™©**

- React Appì„ Amplifyì— ë°°í¬í•œ ë’¤, í˜ì´ì§€ì—ì„œ ìƒˆë¡œê³ ì¹¨ì„ ì§„í–‰í•˜ë©´ URLì—Â `/`ê°€ ë”°ë¼ë¶™ì—ˆê³ , ì½˜ì†”ì—ëŠ” 404ì—ëŸ¬ê°€ ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ‰ í•´ê²°

- Amplifyì˜ [Redirection] ë©”ë‰´ì˜ ì„¤ì •ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
    - `</^((?!\.(css\|gif\|ico\|jpg\|js\|png\|svg\|txt)).)*$/>`Â ì¶”ê°€
    
    ![image](https://github.com/user-attachments/assets/ef97a60e-f5f5-46dc-9d44-8e6ed7e1e0a5)

    
- ì˜¤ë¥˜ì˜ ì›ì¸ì€ Reactì•±ì˜ **SPAë¼ìš°íŒ…**ê³¼ Amplifyì˜ **ë¼ìš°íŒ…**ì˜ ì°¨ì´ì ìœ¼ë¡œ ì¸í•´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    - Reactì•±ì€ í•˜ë‚˜ì˜ index(/)ë¡œë¶€í„° í˜ì´ì§€ê°€ ì‹œì‘ë˜ì§€ë§Œ, AmplifyëŠ” ì •ì í˜ì´ì§€ë¥¼ í˜¸ìŠ¤íŒ…í•˜ê¸° ìœ„í•œ ê²ƒìœ¼ë¡œ **MPAë¼ìš°íŒ…**ì— ì í•©í•©ë‹ˆë‹¤.
    - ì´ë¥¼ ìœ„í•´, `/` ê²½ë¡œ ë’¤ì— ë¶™ëŠ” ê²ƒë“¤ì— 200 rewriteê°€ ë˜ë„ë¡ ì„¤ì •í•´ì£¼ì§€ë§Œ, ìœ„ì— ì„¤ì •í•œ ì •ê·œì‹ ê·œì¹™ì— ë”°ë¼ í•´ë‹¹íŒŒì¼ëª…ì€ Redirectionì— ê±¸ë¦¬ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.

</details>

### âš™ï¸ Service Architecture
<img src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F231a861b-88a7-4a1d-bfa3-082686e82101%2F6922aaf2-60ed-4652-89f2-a25edab9df12%2Fimage.png?table=block&id=775dbeab-50e9-4973-966f-f097bc7e649c&spaceId=231a861b-88a7-4a1d-bfa3-082686e82101&width=2000&userId=80550774-935f-4f12-afd4-6fb636b2c2ea&cache=v2" />

### ğŸ”¨ Service Tools

#### Front

<span><img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=black"></span>
<span><img src="https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=Vite&logoColor=white"></span>
<span><img src="https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=TypeScript&logoColor=white"></span>
<br/>
<span><img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=purple"></span>
<span><img src="https://img.shields.io/badge/ReactQuery-FF4154?style=for-the-badge&logo=ReactQuery&logoColor=white"></span>
<span><img src="https://img.shields.io/badge/Zustand-F3DF49?style=for-the-badge&logo=zustand&logoColor=white"></span>
<span><img src="https://img.shields.io/badge/StyledComponents-DB7093?style=for-the-badge&logo=StyledComponents&logoColor=white"></span>
<span><img src="https://img.shields.io/badge/ReactHookForm-EC5990?style=for-the-badge&logo=ReactHookForm&logoColor=white"></span>

#### Etc

<span><img src="https://img.shields.io/badge/AwsAmplify-FF9900?style=for-the-badge&logo=AwsAmplify&logoColor=white"></span>

### âœ… í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•

1. Node ì„¤ì¹˜ í™•ì¸

   - `node -v` : v22.0.0
   - ì„¤ì¹˜ë°©ë²• : https://nodejs.org/en/download/package-manager ì°¸ê³ 

2. Yarn ì„¤ì¹˜ í™•ì¸

   - `yarn -v` : 1.22.21
   - ì„¤ì¹˜ë°©ë²• : https://www.heropy.dev/p/ijqX9h ì°¸ê³ 

3. ì˜ì¡´ì„±(depencies) ì„¤ì¹˜

   - `yarn install`

4. .envì‘ì„±

```
VITE_SHARE_KAKAO_LINK_KEY=

VITE_API_URL=http://localhost:3000
VITE_API_TOKEN_URL=http://localhost:3000/api
VITE_API_ADMIN_URL=http://localhost:3000/auth
VITE_KAKAO_LOGIN_URL=http://localhost:3000/oauth2/authorization/kakao
VITE_GOOGLE_LOGIN_URL=http://localhost:3000/oauth2/authorization/google
VITE_SOCKET_URL=ws://localhost:3000/api/chat/msg
```

4. React APPì‹¤í–‰
   - `yarn dev`
   - í¬íŠ¸ë²ˆí˜¸(5173) í™•ì¸í•˜ì—¬, ë¸Œë¼ìš°ì € ì‹¤í–‰
